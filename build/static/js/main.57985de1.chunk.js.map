{"version":3,"sources":["pages/Home.js","pages/Proposal.js","images/Moralis.png","App.js","reportWebVitals.js","index.js"],"names":["Home","useState","passRate","setPassRate","totalP","setTotalP","counted","setCounted","voters","setVoters","useMoralis","Moralis","isInitialized","proposals","setProposals","Web3Api","useMoralisWeb3Api","sub","setSub","contractProcessor","useWeb3ExecuteFunction","newProposal","a","options","contractAddress","functionName","abi","inputs","internalType","name","type","outputs","stateMutability","params","_description","_canVote","fetch","onSuccess","console","log","onError","error","alert","data","message","getStatus","proposalId","ProposalCounts","Object","extend","query","Query","equalTo","first","undefined","result","attributes","passed","color","text","useEffect","getProposals","Proposals","descending","find","results","Promise","all","map","e","uid","description","proposer","id","to","state","table","length","getPassRate","votesUp","forEach","fetchNFTOwners","address","chain","token","getNFTOwners","nftOwners","addresses","owner_of","className","defaultActiveKey","tabStyle","tabKey","tabName","info","title","style","width","marginTop","columnsConfig","header","pageSize","buttonConfig","isLoading","loadingText","theme","inputWidth","validation","required","value","onSubmit","createProposal","inputResult","Proposal","proposalDetails","useLocation","lastestVote","setLatestVote","percUp","setPercup","percDown","setPercDown","votes","setVotes","castVote","upDown","_id","_vote","getVotes","Votes","Number","votesDown","toFixed","votesDirection","voter","fill","votedFor","size","svg","content","seed","isDisabled","height","border","App","src","moralisLogo","alt","path","element","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","appId","serverUrl","document","getElementById"],"mappings":"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","file":"static/js/main.57985de1.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./pages.css\";\nimport { TabList, Tab, Widget, Tag, Table, Form } from \"web3uikit\";\nimport { Link } from \"react-router-dom\";\nimport { useMoralis, useMoralisWeb3Api, useWeb3ExecuteFunction } from \"react-moralis\";\n\n\n\nconst Home = () => {\n  \n  const [passRate, setPassRate] = useState(0);\n  const [totalP, setTotalP] = useState(0);\n  const [counted, setCounted] = useState(0);\n  const [voters, setVoters] = useState(0);\n  const { Moralis, isInitialized } = useMoralis();\n  const [proposals, setProposals]= useState();\n  const Web3Api = useMoralisWeb3Api();\n  const [sub, setSub] = useState();\n  const contractProcessor = useWeb3ExecuteFunction();\n\n\n  async function createProposal(newProposal) {\n    let options = {\n      contractAddress: \"0xcd3bE5f02F82442193615bf2C2D6DBbc42992A74\",\n      functionName: \"createProposal\",\n      abi: [\n        {\n          inputs: [\n            {\n              internalType: \"string\",\n              name: \"_description\",\n              type:\"string\"\n            },\n            {\n              internalType: \"address[]\",\n              name:\"_canVote\",\n              type: \"address[]\",\n            },\n          ],\n          name:\"createProposal\",\n          outputs:[],\n          stateMutability:\"nonpayable\", \n          type:\"function\",\n        },\n      ], //can be modified in case\n      params: {\n        _description: newProposal,\n        _canVote: voters,\n\n      },\n    };\n      \n\n    await contractProcessor.fetch({\n      params: options,\n      onSuccess: () => {\n        console.log(\"Proposal Successful\");\n        setSub(false);\n      },\n      onError: (error) => {\n        alert(error.data.message);\n        setSub(false);\n      },\n    });\n\n\n\n\n\n\n  }\n\n  async function getStatus(proposalId) {\n    const ProposalCounts = Moralis.Object.extend(\"ProposalCounts\");\n    const query = new Moralis.Query(ProposalCounts);\n    query.equalTo(\"uid\" , proposalId);\n    const result = await query.first();\n    if (result !== undefined) {\n      if (result.attributes.passed) {\n        return { color: \"green\", text: \"Passed\" };\n      } else {\n        return { color: \"red\", text: \"Rejected\" };\n      }\n     } else {\n      return { color: \"blue\", text: \"Ongoing\" };\n     }\n    }\n\n    useEffect(() => {\n      if (isInitialized) {\n\n        async function getProposals() {\n          const Proposals = Moralis.Object.extend(\"Proposals\");\n          const query = new Moralis.Query(Proposals);\n          query.descending(\"uid_decimal\");\n          const results = await query.find();\n          const table = await Promise.all(\n            results.map(async (e) => [\n              e.attributes.uid,\n              e.attributes.description,\n              <Link to=\"/proposal\" state={{\n                description: e.attributes.description,\n                color: (await getStatus(e.attributes.uid)).color,\n                text: (await getStatus(e.attributes.uid)).text,\n                id: e.attributes.uid,\n                proposer: e.attributes.proposer\n\n                }}>\n                <Tag\n                color={(await getStatus(e.attributes.uid)).color}\n                text={(await getStatus(e.attributes.uid)).text}\n                />\n              </Link>,  \n\n\n          \n            ])\n          );\n          setProposals(table);\n          setTotalP(results.length);\n        } \n        \n\n        async function getPassRate() {\n          const ProposalCounts = Moralis.Object.extend(\"ProposalCounts\");\n          const query = new Moralis.Query(ProposalCounts);\n          const results = await query.find();\n          let votesUp = 0;\n\n          results.forEach((e) => {\n            if (e.attributes.passed) {\n              votesUp++;\n            }\n          });\n\n          setCounted(results.length);\n          setPassRate((votesUp / results.length) * 100);\n        }\n        const fetchNFTOwners = async () => {\n          const options = {\n            address: \"0xeaC9C0212Ba856c65a161583ACc76C108bC05472\", //nft contract..\n           \n            chain: \"bsc\",\n          };\n          const nftOwners = await Web3Api.token.getNFTOwners(options);\n          const addresses = nftOwners.result.map((e) => e.owner_of);\n          setVoters(addresses);\n        };\n\n//   // {voters.length} on eligible voters line .. instead of 1000 ..\n\n\n\n        fetchNFTOwners();   \n        getProposals();\n        getPassRate();\n\n        \n      }\n}, [isInitialized]);\n\n// Upper 3 tabs there..\n\n  return (\n    <> \n      <div className=\"content\"> \n      <TabList defaultActiveKey={1} tabStyle=\"bulbUnion\"> \n      \n        <Tab tabKey={1} tabName=\"DAO\"> \n          {proposals && (\n        <div className=\"tabContent\">\n          Governance Overview\n          <div className=\"widgets\">\n            <Widget\n            info={totalP}\n            title=\"Proposals Created\"\n            style={{ width: \"200%\"}}\n            >\n              <div className=\"extraWidgetInfo\">\n                <div className=\"extraTitle\">Pass Rate</div>\n                <div className=\"progress\">\n                   <div\n                     className=\"progressPercentage\"\n                     style={{width: `${passRate}%`}}\n              \n                    ></div>\n                </div>\n             \n             \n             \n              </div>\n            \n\n\n            </Widget>\n            <Widget info=\"1000\" title=\"Eligible Voters\" />\n            <Widget info={totalP-counted} title=\"Ongoing Proposals\" />\n          </div> \n          Recent Proposals\n           <div style={{ marginTop: \"30px\" }}>\n             <Table\n               columnsConfig=\"10% 70% 20%\"\n               data={proposals}\n               header={[\n                 <span>ID</span>,\n                 <span>Description</span>,\n                 <span>Status</span>,\n               ]}\n               pageSize={5}\n              \n              /> \n            </div>\n\n            <Form\n                buttonConfig={{\n                  isLoading: sub,\n                  loadingText: \"Submitting Proposal\",\n                  text: \"Submit\",\n                  theme: \"secondary\",\n                }}\n                data={[\n                  {\n                    inputWidth: \"100%\",\n                    name: \"New Proposal\",\n                    type: \"textarea\",\n                    validation: {\n                      required: true,\n                    },\n                    value: \"\",\n                  },\n                ]}\n                onSubmit={(e) => {\n                  setSub(true);\n                  createProposal(e.data[0].inputResult);\n                }}\n                title= \"Create a New Proposal\"\n\n              />\n\n      \n        </div>\n          )}\n           \n\n        </Tab>\n        \n      </TabList>\n      </div>\n     \n    </>\n  );\n};\n\nexport default Home;\n","import React, { useState, useEffect } from \"react\";\nimport \"./pages.css\";\nimport { Tag, Widget, Blockie, Tooltip, Icon, Form, Table } from \"web3uikit\";\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router\";\nimport { useMoralis, useWeb3ExecuteFunction } from \"react-moralis\"; //web3\n\nconst Proposal = () => {\n \n  const { state: proposalDetails } = useLocation();\n  const { Moralis, isInitialized } =useMoralis();\n  const [lastestVote, setLatestVote] = useState();\n  const [percUp, setPercup] = useState(0);\n  const [percDown, setPercDown] = useState(0);\n  const [votes, setVotes] = useState([]);\n  const [sub, setSub] = useState(false); //web3\n  const contractProcessor = useWeb3ExecuteFunction(); //web3\n\n\n  useEffect(() => {\n    if (isInitialized) {\n      async function getVotes() {\n        const Votes = Moralis.Object.extend(\"Votes\");\n        const query = new Moralis.Query(Votes);\n        query.equalTo(\"proposal\", proposalDetails.id);\n        query.descending(\"createdAt\");\n        const results = await query.find();\n        if (results.length > 0) {\n          setLatestVote(results[0].attributes);\n          setPercDown(\n            (\n              (Number(results[0].attributes.votesDown) /\n                (Number(results[0].attributes.votesDown) +\n                  Number(results[0].attributes.votesUp))) *\n               100\n            ).toFixed(0)\n          );\n          setPercup(\n            (\n            (Number(results[0].attributes.votesUp) /\n              (Number(results[0].attributes.votesDown) +\n                Number(results[0].attributes.votesUp)))*\n            100\n\n          ).toFixed(0)\n          );\n  \n        }\n\n\n        const votesDirection = results.map((e) => [\n          e.attributes.voter,\n          <Icon \n          fill={e.attributes.votedFor ? \"#2cc40a\" : \"#d93d3d\"}\n          size={24}\n          svg={e.attributes.votedFor ? \"checkmark\" : \"arrowCircleDown\"}\n          />,\n        ]);\n        setVotes(votesDirection);\n\n      }\n      getVotes();\n\n    }\n  }, [isInitialized]);\n\n\n  async function castVote(upDown) { //web3 section for vote for or against\n\n    let options = {\n      contractAddress: \"0xcd3bE5f02F82442193615bf2C2D6DBbc42992A74\", //dao smart contract\n      functionName: \"voteOnProposal\", //function name\n      abi: [\n        {\n          inputs: [\n            {\n              internalType: \"uint256\",\n              name: \"_id\",\n              type:\"uint256\"\n            },\n            {\n              internalType: \"bool\",\n              name:\"_vote\",\n              type: \"bool\",\n            },\n          ],\n          name:\"voteOnProposal\",\n          outputs:[],\n          stateMutability:\"nonpayable\", \n          type:\"function\",\n        },\n      ], //web3 \n      params: {\n        _id: proposalDetails.id,\n        _vote: upDown,\n\n      },\n    };\n  \n      \n\n    await contractProcessor.fetch({\n      params: options,\n      onSuccess: () => {\n        console.log(\"Vote Cast Successfully\");\n        setSub(false);\n      },\n      onError: (error) => {\n        alert(error.data.message);\n        setSub(false);\n      },\n    }); //end of web3 section ....\n\n\n  }\n\n\n\n  return (\n    <>\n      <div className=\"contentProposal\">\n        <div className=\"proposal\">\n          <Link to=\"/\">\n            <div className=\"backHome\">\n              <Icon fill=\"#ffffff\" size={20} svg=\"chevronLeft\" />\n              Overview\n           </div>\n          </Link>\n          <div>{proposalDetails.description}</div> \n            <div className=\"proposalOverview\">\n              <Tag color={proposalDetails.color} text={proposalDetails.text} />\n            <div className=\"proposer\">\n              <span>Proposed By </span>\n              <Tooltip content={proposalDetails.proposer}>\n                <Blockie seed={proposalDetails.proposer} />\n              </Tooltip>\n            </div>\n         </div>\n        </div>\n        {lastestVote && (\n        <div className=\"widgets\">\n            <Widget info={lastestVote.votesUp} title=\"Votes For\">\n              <div className=\"extraWidgetInfo\">\n                <div className=\"extraTitle\">{percUp}%</div>\n                <div className=\"progress\">\n                   <div\n                     className=\"progressPercentage\"\n                     style={{width: `${percUp}%`}}\n              \n                    ></div>\n                </div>\n              </div>\n            </Widget>\n            <Widget info={lastestVote.votesDown} title=\"Votes Against\">\n            <div className=\"extraWidgetInfo\">\n                <div className=\"extraTitle\">{percDown}%</div>\n                <div className=\"progress\">\n                   <div\n                     className=\"progressPercentage\"\n                     style={{width: `${percDown}%`}}\n                    ></div>\n                </div> \n              </div>\n            </Widget>            \n          </div>\n        )}\n          <div className=\"votesDiv\">\n          <Table\n             style={{ width: \"60%\"}}\n             columnsConfig=\"90% 10%\"\n             data={votes}\n             header={[<span>Address</span>, <span>Vote</span>]}\n             pageSize={5}\n          />\n          <Form\n          isDisabled={proposalDetails.text !== \"Ongoing\"} \n          style={{\n            width: \"35%\",\n            height: \"250px\",\n            border: \"1px solid rgba(6, 158, 252, 0.2)\",\n          }}\n          buttonConfig={{\n            isLoading:sub,\n            loadingText: \"Casting Vote\",\n            text: \"Vote\",\n            theme: \"secondary\",\n          }}\n          data={[\n            {\n              inputWidth:\"100%\",\n              name: \"Cast Vote\",\n              options: [\"For\", \"Against\"],\n              type: \"radios\",\n              validation: {\n                required: true,\n              },\n            },\n          ]}\n          onSubmit={(e) => {\n            if (e.data[0].inputResult[0] === \"For\") {\n              castVote(true);\n            } else {\n              castVote(false);\n            }\n            setSub(true);\n          }}\n          title=\"Cast Vote\"\n        />\n        </div>\n     </div>\n     <div className=\"voting\"></div>\n    </>\n  );\n};\n\nexport default Proposal;\n","export default __webpack_public_path__ + \"static/media/Moralis.3c392c50.png\";","import React from \"react\";\nimport \"./App.css\";\nimport { Routes, Route } from \"react-router-dom\";\nimport Home from \"./pages/Home\";\nimport Proposal from \"./pages/Proposal\";\nimport moralisLogo from \"./images/Moralis.png\";\nimport { ConnectButton } from \"web3uikit\";\n\n\nconst App = () => {\n  return (\n    <>\n  <div className=\"header\">\n    <img width=\"160px\" src={moralisLogo} alt=\"logo\" />\n    <ConnectButton/>\n  </div>\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/proposal\" element={<Proposal />} />\n      </Routes>\n    </>\n  );\n};\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n      import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n        getCLS(onPerfEntry);\n        getFID(onPerfEntry);\n        getFCP(onPerfEntry);\n        getLCP(onPerfEntry);\n        getTTFB(onPerfEntry);\n      });\n    }\n  };\n  \n  export default reportWebVitals;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { MoralisProvider } from \"react-moralis\";\nimport { BrowserRouter } from \"react-router-dom\";\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <MoralisProvider appId=\"6k9BwiHwjuDymYfEMDrjF51D7KjlC0oF614eccG4\" serverUrl=\"https://sjfr8sr39ht5.usemoralis.com:2053/server\">\n      <BrowserRouter>\n          <App />\n      </BrowserRouter> \n    </MoralisProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}